{"ast":null,"code":"import { takeLatest, call, put } from \"redux-saga/effects\";\nimport { all, deleteTodo, newTodo, updateTodo } from \"./api-calls\";\nexport function* watcherSaga() {\n  yield takeLatest(\"todos/fetchTodos\", fetchTodos);\n  yield takeLatest(\"todos/addTodo\", addTodo);\n  yield takeLatest(\"todos/completeTodo\", completeTodo);\n  yield takeLatest(\"todos/archiveTodo\", archiveTodo);\n}\n\nfunction* fetchTodos() {\n  try {\n    const response = yield call(all);\n    const todos = response.data;\n    yield put({\n      type: \"todos/getTodos\",\n      payload: {\n        todos\n      }\n    });\n  } catch (error) {\n    console.log(error);\n    yield put({\n      type: \"todos/error\",\n      error\n    });\n  }\n}\n\nfunction* addTodo(action) {\n  try {\n    yield call(newTodo, action);\n    yield put({\n      type: \"todos/fetchTodos\"\n    });\n  } catch (error) {\n    console.log(error);\n    yield put({\n      type: \"todos/error\",\n      error\n    });\n  }\n}\n\nfunction* completeTodo(action) {\n  try {\n    yield call(updateTodo, action);\n    yield put({\n      type: \"todos/fetchTodos\"\n    });\n  } catch (error) {\n    console.log(error);\n    yield put({\n      type: \"todos/error\",\n      error\n    });\n  }\n}\n\nfunction* archiveTodo(action) {\n  try {\n    yield call(deleteTodo, action);\n    yield put({\n      type: \"todos/fetchTodos\"\n    });\n  } catch (error) {\n    console.log(error);\n    yield put({\n      type: \"todos/error\",\n      error\n    });\n  }\n}","map":{"version":3,"sources":["C:/Users/ayad/Desktop/NW/todo-app/react-front/src/sagas.tsx"],"names":["takeLatest","call","put","all","deleteTodo","newTodo","updateTodo","watcherSaga","fetchTodos","addTodo","completeTodo","archiveTodo","response","todos","data","type","payload","error","console","log","action"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,IAArB,EAA2BC,GAA3B,QAAsC,oBAAtC;AACA,SAASC,GAAT,EAAcC,UAAd,EAA0BC,OAA1B,EAAmCC,UAAnC,QAAqD,aAArD;AAGA,OAAO,UAAUC,WAAV,GAAwB;AAC7B,QAAMP,UAAU,CAAC,kBAAD,EAAqBQ,UAArB,CAAhB;AACA,QAAMR,UAAU,CAAC,eAAD,EAAkBS,OAAlB,CAAhB;AACA,QAAMT,UAAU,CAAC,oBAAD,EAAuBU,YAAvB,CAAhB;AACA,QAAMV,UAAU,CAAC,mBAAD,EAAsBW,WAAtB,CAAhB;AACD;;AAED,UAAUH,UAAV,GAAuB;AACrB,MAAI;AACF,UAAMI,QAAQ,GAAG,MAAMX,IAAI,CAACE,GAAD,CAA3B;AACA,UAAMU,KAAK,GAAGD,QAAQ,CAACE,IAAvB;AACA,UAAMZ,GAAG,CAAC;AAAEa,MAAAA,IAAI,EAAE,gBAAR;AAA0BC,MAAAA,OAAO,EAAE;AAAEH,QAAAA;AAAF;AAAnC,KAAD,CAAT;AACD,GAJD,CAIE,OAAOI,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,UAAMf,GAAG,CAAC;AAAEa,MAAAA,IAAI,EAAE,aAAR;AAAuBE,MAAAA;AAAvB,KAAD,CAAT;AACD;AACF;;AAED,UAAUR,OAAV,CAAkBW,MAAlB,EAAsC;AACpC,MAAI;AACF,UAAMnB,IAAI,CAACI,OAAD,EAAUe,MAAV,CAAV;AACA,UAAMlB,GAAG,CAAC;AAAEa,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAT;AACD,GAHD,CAGE,OAAOE,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,UAAMf,GAAG,CAAC;AAAEa,MAAAA,IAAI,EAAE,aAAR;AAAuBE,MAAAA;AAAvB,KAAD,CAAT;AACD;AACF;;AAED,UAAUP,YAAV,CAAuBU,MAAvB,EAA2C;AACzC,MAAI;AACF,UAAMnB,IAAI,CAACK,UAAD,EAAac,MAAb,CAAV;AACA,UAAMlB,GAAG,CAAC;AAAEa,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAT;AACD,GAHD,CAGE,OAAOE,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,UAAMf,GAAG,CAAC;AAAEa,MAAAA,IAAI,EAAE,aAAR;AAAuBE,MAAAA;AAAvB,KAAD,CAAT;AACD;AACF;;AAED,UAAUN,WAAV,CAAsBS,MAAtB,EAA0C;AACxC,MAAI;AACF,UAAMnB,IAAI,CAACG,UAAD,EAAagB,MAAb,CAAV;AACA,UAAMlB,GAAG,CAAC;AAAEa,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAT;AACD,GAHD,CAGE,OAAOE,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,UAAMf,GAAG,CAAC;AAAEa,MAAAA,IAAI,EAAE,aAAR;AAAuBE,MAAAA;AAAvB,KAAD,CAAT;AACD;AACF","sourcesContent":["import { takeLatest, call, put } from \"redux-saga/effects\";\r\nimport { all, deleteTodo, newTodo, updateTodo } from \"./api-calls\";\r\nimport { TodoAction } from \"./components/todos/todos.slice\";\r\n\r\nexport function* watcherSaga() {\r\n  yield takeLatest(\"todos/fetchTodos\", fetchTodos);\r\n  yield takeLatest(\"todos/addTodo\", addTodo);\r\n  yield takeLatest(\"todos/completeTodo\", completeTodo);\r\n  yield takeLatest(\"todos/archiveTodo\", archiveTodo);\r\n}\r\n\r\nfunction* fetchTodos() {\r\n  try {\r\n    const response = yield call(all);\r\n    const todos = response.data;\r\n    yield put({ type: \"todos/getTodos\", payload: { todos } });\r\n  } catch (error) {\r\n    console.log(error);\r\n    yield put({ type: \"todos/error\", error });\r\n  }\r\n}\r\n\r\nfunction* addTodo(action: TodoAction) {\r\n  try {\r\n    yield call(newTodo, action);\r\n    yield put({ type: \"todos/fetchTodos\" });\r\n  } catch (error) {\r\n    console.log(error);\r\n    yield put({ type: \"todos/error\", error });\r\n  }\r\n}\r\n\r\nfunction* completeTodo(action: TodoAction) {\r\n  try {\r\n    yield call(updateTodo, action);\r\n    yield put({ type: \"todos/fetchTodos\" });\r\n  } catch (error) {\r\n    console.log(error);\r\n    yield put({ type: \"todos/error\", error });\r\n  }\r\n}\r\n\r\nfunction* archiveTodo(action: TodoAction) {\r\n  try {\r\n    yield call(deleteTodo, action);\r\n    yield put({ type: \"todos/fetchTodos\" });\r\n  } catch (error) {\r\n    console.log(error);\r\n    yield put({ type: \"todos/error\", error });\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}