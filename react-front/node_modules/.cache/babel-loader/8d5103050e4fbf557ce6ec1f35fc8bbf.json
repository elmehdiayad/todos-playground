{"ast":null,"code":"import { takeLatest, call, put } from \"redux-saga/effects\";\nimport axios from \"axios\";\nexport function* watcherSaga() {\n  yield takeLatest(\"todos/fetchTodos\", fetchTodos);\n  yield takeLatest(\"todos/addTodo\", addTodo);\n  yield takeLatest(\"todos/completeTodo\", completeTodo);\n  yield takeLatest(\"todos/archiveTodo\", archiveTodo);\n}\n\nfunction all() {\n  return axios({\n    method: \"get\",\n    url: \"http://localhost:8080/todos\"\n  });\n}\n\nfunction newTodo(action) {\n  return axios({\n    method: \"post\",\n    url: \"http://localhost:8080/todos\",\n    data: {\n      title: action.payload.title,\n      description: action.payload.description,\n      completed: false,\n      deleted: false\n    }\n  });\n}\n\nfunction updateTodo(action) {\n  return axios({\n    method: \"put\",\n    url: \"http://localhost:8080/todos/complete/\" + action.payload.id\n  });\n}\n\nfunction deleteTodo(action) {\n  return axios({\n    method: \"put\",\n    url: \"http://localhost:8080/todos/archive/\" + action.payload.id\n  });\n}\n\nfunction* fetchTodos() {\n  try {\n    const response = yield call(all);\n    const todos = response.data;\n    yield put({\n      type: \"todos/getTodos\",\n      payload: {\n        todos\n      }\n    });\n  } catch (error) {\n    console.log(error);\n    yield put({\n      type: \"todos/error\",\n      error\n    });\n  }\n}\n\nfunction* addTodo(action) {\n  try {\n    yield call(newTodo, action);\n    yield put({\n      type: \"todos/fetchTodos\"\n    });\n  } catch (error) {\n    console.log(error);\n    yield put({\n      type: \"todos/error\",\n      error\n    });\n  }\n}\n\nfunction* completeTodo(action) {\n  try {\n    yield call(updateTodo, action);\n    yield put({\n      type: \"todos/fetchTodos\"\n    });\n  } catch (error) {\n    console.log(error);\n    yield put({\n      type: \"todos/error\",\n      error\n    });\n  }\n}\n\nfunction* archiveTodo(action) {\n  try {\n    yield call(deleteTodo, action);\n    yield put({\n      type: \"todos/fetchTodos\"\n    });\n  } catch (error) {\n    console.log(error);\n    yield put({\n      type: \"todos/error\",\n      error\n    });\n  }\n}","map":{"version":3,"sources":["C:/Users/ayad/Desktop/NW/todo-app/react-front/src/sagas.tsx"],"names":["takeLatest","call","put","axios","watcherSaga","fetchTodos","addTodo","completeTodo","archiveTodo","all","method","url","newTodo","action","data","title","payload","description","completed","deleted","updateTodo","id","deleteTodo","response","todos","type","error","console","log"],"mappings":"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","sourcesContent":["import { takeLatest, call, put } from \"redux-saga/effects\";\r\nimport { TodoAction } from \"./components/todos/todos.slice\";\r\nimport axios from \"axios\";\r\n\r\nexport function* watcherSaga() {\r\n  yield takeLatest(\"todos/fetchTodos\", fetchTodos);\r\n  yield takeLatest(\"todos/addTodo\", addTodo);\r\n  yield takeLatest(\"todos/completeTodo\", completeTodo);\r\n  yield takeLatest(\"todos/archiveTodo\", archiveTodo);\r\n}\r\n\r\nfunction all() {\r\n  return axios({\r\n    method: \"get\",\r\n    url: \"http://localhost:8080/todos\",\r\n  });\r\n}\r\n\r\nfunction newTodo(action: TodoAction) {\r\n  return axios({\r\n    method: \"post\",\r\n    url: \"http://localhost:8080/todos\",\r\n    data: {\r\n      title: action.payload.title,\r\n      description: action.payload.description,\r\n      completed: false,\r\n      deleted: false,\r\n    },\r\n  });\r\n}\r\n\r\nfunction updateTodo(action: TodoAction) {\r\n  return axios({\r\n    method: \"put\",\r\n    url: \"http://localhost:8080/todos/complete/\" + action.payload.id,\r\n  });\r\n}\r\n\r\nfunction deleteTodo(action: TodoAction) {\r\n  return axios({\r\n    method: \"put\",\r\n    url: \"http://localhost:8080/todos/archive/\" + action.payload.id,\r\n  });\r\n}\r\n\r\nfunction* fetchTodos() {\r\n  try {\r\n    const response = yield call(all);\r\n    const todos = response.data;\r\n    yield put({ type: \"todos/getTodos\", payload: { todos } });\r\n  } catch (error) {\r\n    console.log(error);\r\n    yield put({ type: \"todos/error\", error });\r\n  }\r\n}\r\n\r\nfunction* addTodo(action: TodoAction) {\r\n  try {\r\n    yield call(newTodo, action);\r\n    yield put({ type: \"todos/fetchTodos\" });\r\n  } catch (error) {\r\n    console.log(error);\r\n    yield put({ type: \"todos/error\", error });\r\n  }\r\n}\r\n\r\nfunction* completeTodo(action: TodoAction) {\r\n  try {\r\n    yield call(updateTodo, action);\r\n    yield put({ type: \"todos/fetchTodos\" });\r\n  } catch (error) {\r\n    console.log(error);\r\n    yield put({ type: \"todos/error\", error });\r\n  }\r\n}\r\n\r\nfunction* archiveTodo(action: TodoAction) {\r\n  try {\r\n    yield call(deleteTodo, action);\r\n    yield put({ type: \"todos/fetchTodos\" });\r\n  } catch (error) {\r\n    console.log(error);\r\n    yield put({ type: \"todos/error\", error });\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}